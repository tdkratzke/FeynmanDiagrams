We have three vertices P0, P1, and P2, which are the internal vertices of a directed path of
four blue edges. The five vertices C0, C1, C2, C3, and C4 are the vertices of a directed cycle
of five blue edges.

We wish to match these eight vertices to each other with four red edges.
We must count the number of unlabeled graphs we can make this way.

The first thing I did was say "Let's match P0 to P1 and count the number of ways to complete
the matching.  Call this number A1.  Then multiply A1 by two to count the number of ways of
matching P0 to P1 AND P0 to P2".

Then I said "Let's match P0 to C0 and count the number of ways to complete the matching.  Call this
number B1.  Multiply B1 by one since matching P0 to any other vertex in the cycle does not create
graphs different from the ones created by matching P0 to C0".

So our answer will be (2 * A1) + B1 and we must compute A1 and B1.

Let's compute A1.  We know that P0 is matched to P1.  Then:
P2 must be matched to the cycle and we can assume that it is matched to C0.  C1 can be
matched to any of C2, C3, and C4. The remaining two vertices in the cycle will be
matched to each other.  Hence, A1 = 3.

Let's compute B1.  We know that P0 is matched to C0.  Then:
1. If P1 is matched to P2, then C1 can be matched to C2, C3, or C4, and these are all different.
The remaining two vertices of the cycle must be matched to each other.
This gives us a contribution of three to B1.

2. If P1 is matched to the cycle, then P2 must be also, and there are twelve ways of doing
this, and they're all different.  Each of these twelve leaves only  a pair of cycle vertices that
must be matched to each other.

Hence, B1 = 3 + 12.

So my answer is (2 * 3) + (3 + 12) = 21.


 